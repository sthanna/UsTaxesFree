# ==========================================
# Production Environment Configuration
# ==========================================
# CRITICAL: All secrets MUST come from AWS Secrets Manager or Kubernetes Secrets
# This file should contain only non-sensitive configuration

# Server Configuration
NODE_ENV=production
PORT=3000
LOG_LEVEL=warn

# Database Configuration
# NEVER hardcode production credentials - use secrets manager
DATABASE_URL=${DATABASE_URL_FROM_SECRETS_MANAGER}
DB_POOL_MIN=10
DB_POOL_MAX=50

# Security & Authentication
# CRITICAL: These MUST be injected from vault/secrets manager
JWT_SECRET=${JWT_SECRET_FROM_VAULT}
JWT_EXPIRY=8h
BCRYPT_ROUNDS=12

# CORS Configuration
CORS_ORIGIN=https://app.taxfiling.example.com,https://taxfiling.example.com

# Redis
REDIS_URL=${REDIS_URL_FROM_SECRETS_MANAGER}

# Observability & Monitoring
OTEL_ENABLED=true
OTEL_EXPORTER_OTLP_ENDPOINT=https://otel-collector.prod.internal:4318
OTEL_SERVICE_NAME=tax-filing-api

# Datadog
DD_AGENT_HOST=datadog-agent.prod.internal
DD_TRACE_AGENT_PORT=8126
DD_ENV=production
DD_VERSION=${APP_VERSION}

# AWS Configuration
AWS_REGION=us-east-1
AWS_S3_BUCKET=tax-filing-documents-prod
AWS_SECRETS_MANAGER_ENABLED=true

# E-filing Configuration
IRS_EFILE_ENDPOINT=https://services.irs.gov/
IRS_EFILE_TCC=${IRS_EFILE_TCC_FROM_VAULT}
IRS_EFILE_EFIN=${IRS_EFILE_EFIN_FROM_VAULT}

# Feature Flags
ENABLE_PDF_GENERATION=true
ENABLE_EFILE_SUBMISSION=true
ENABLE_STATE_TAX=true

# Rate Limiting (stricter in production)
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# Production-specific settings
ENABLE_METRICS=true
ENABLE_DISTRIBUTED_TRACING=true
SESSION_SECURE=true
COOKIE_SECURE=true
TRUST_PROXY=true
