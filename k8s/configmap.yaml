apiVersion: v1
kind: ConfigMap
metadata:
  name: backend-config
  namespace: tax-filing-production
data:
  NODE_ENV: "production"
  PORT: "3000"
  LOG_LEVEL: "warn"
  DB_POOL_MIN: "10"
  DB_POOL_MAX: "50"
  JWT_EXPIRY: "8h"
  BCRYPT_ROUNDS: "12"
  CORS_ORIGIN: "https://app.taxfiling.example.com,https://taxfiling.example.com"
  OTEL_ENABLED: "true"
  OTEL_EXPORTER_OTLP_ENDPOINT: "http://otel-collector:4318"
  OTEL_SERVICE_NAME: "tax-filing-api"
  AWS_REGION: "us-east-1"
  AWS_S3_BUCKET: "tax-filing-documents-prod"
  AWS_SECRETS_MANAGER_ENABLED: "true"
  IRS_EFILE_ENDPOINT: "https://services.irs.gov/"
  ENABLE_PDF_GENERATION: "true"
  ENABLE_EFILE_SUBMISSION: "true"
  ENABLE_STATE_TAX: "true"
  RATE_LIMIT_WINDOW_MS: "900000"
  RATE_LIMIT_MAX_REQUESTS: "100"
  ENABLE_METRICS: "true"
  ENABLE_DISTRIBUTED_TRACING: "true"
  SESSION_SECURE: "true"
  COOKIE_SECURE: "true"
  TRUST_PROXY: "true"

---
apiVersion: v1
kind: ConfigMap
metadata:
  name: backend-config
  namespace: tax-filing-staging
data:
  NODE_ENV: "staging"
  PORT: "3000"
  LOG_LEVEL: "info"
  DB_POOL_MIN: "5"
  DB_POOL_MAX: "20"
  JWT_EXPIRY: "12h"
  BCRYPT_ROUNDS: "12"
  CORS_ORIGIN: "https://staging.taxfiling.example.com"
  OTEL_ENABLED: "true"
  OTEL_EXPORTER_OTLP_ENDPOINT: "http://otel-collector:4318"
  OTEL_SERVICE_NAME: "tax-filing-api-staging"
  AWS_REGION: "us-east-1"
  AWS_S3_BUCKET: "tax-filing-documents-staging"
  IRS_EFILE_ENDPOINT: "https://testwebservices.irs.gov/"
  ENABLE_PDF_GENERATION: "true"
  ENABLE_EFILE_SUBMISSION: "true"
  ENABLE_STATE_TAX: "true"
  RATE_LIMIT_WINDOW_MS: "900000"
  RATE_LIMIT_MAX_REQUESTS: "200"
